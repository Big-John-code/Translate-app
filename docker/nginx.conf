server {
    listen 80;
    root /usr/share/nginx/html;
    charset utf-8;

    # Main page
    location = / {
        try_files /index.html =404;
    }

    # Translated markdown (served from output volume)
    location = /book_ua.md {
        alias /data/book_ua.md;
        add_header Content-Type "text/plain; charset=utf-8";
        add_header Cache-Control "no-cache";
    }

    # Tiny progress file (done/total only â€” fast to load)
    location = /progress.json {
        alias /data/progress.json;
        add_header Content-Type "application/json";
        add_header Cache-Control "no-cache";
        add_header Access-Control-Allow-Origin "*";
    }

    # Images extracted from PDF
    location /images/ {
        alias /data/images/;
        add_header Cache-Control "public, max-age=86400";
        try_files $uri =404;
    }

    # Static assets
    location / {
        try_files $uri $uri/ =404;
    }
}
